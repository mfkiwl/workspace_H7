## 第34章 STM32H7 的定时器应用之 TIM1-TIM17 的 PWM实现

## 综合测试（pwmFreq以10倍数增加）

### 1

```
TIM12:
期望pwm占空比： 66.599998%
期望pwm频率： 3Hz
实际pwm占空比： 66.599998%
实际pwm占空比步幅： 0.001527%
实际pwm频率： 2.999995Hz

TIM3:
期望pwm占空比： 50.000000%
期望pwm频率： 7Hz
实际pwm占空比： 50.000000%
实际pwm占空比步幅： 0.001526%
实际pwm频率： 6.999979Hz
```

![TIM12_3Hz__TIM3_7Hz](Images/TIM12_3Hz__TIM3_7Hz.png)

### 2

```
TIM12:
期望pwm占空比： 66.599998%
期望pwm频率： 3000000Hz
实际pwm占空比： 66.599998%
实际pwm占空比步幅： 1.492537%
实际pwm频率： 2985074.750000Hz

TIM3:
期望pwm占空比： 50.000000%
期望pwm频率： 7000000Hz
实际pwm占空比： 50.000000%
实际pwm占空比步幅： 3.448276%
实际pwm频率： 6896551.500000Hz
```

![TIM12_2985074Hz__TIM3_6896551Hz](Images/TIM12_2985074Hz__TIM3_6896551Hz.png)

### 3

```
TIM12:
期望pwm占空比： 66.599998%
期望pwm频率： 30000000Hz
实际pwm占空比： 66.599998%
实际pwm占空比步幅： 14.285714%
实际pwm频率： 28571428.000000Hz

TIM3:
期望pwm占空比： 50.000000%
期望pwm频率： 70000000Hz
实际pwm占空比： 50.000000%
实际pwm占空比步幅： 33.333332%
实际pwm频率： 66666668.000000Hz
```

![TIM12_28571428Hz__TIM3_66666668Hz](Images/TIM12_28571428Hz__TIM3_66666668Hz.png)

### 4 

示波器带宽不够，测25MHz方波不全，测不出100MHz方波

![TIM12_25000000Hz__TIM3_10000000Hz](Images/TIM12_25000000Hz__TIM3_10000000Hz.png)

## 1Hz变频测试

pwmFreq = 3051 Hz 附近：

```
TIM3:
期望pwm占空比： 50.000000%
期望pwm频率： 3046Hz
实际pwm占空比： 50.000000%
实际pwm占空比步幅： 0.003046%
实际pwm频率： 3045.994629Hz

TIM3:
期望pwm占空比： 50.000000%
期望pwm频率： 3047Hz
实际pwm占空比： 50.000000%
实际pwm占空比步幅： 0.003047%
实际pwm频率： 3047.015381Hz

TIM3:
期望pwm占空比： 50.000000%
期望pwm频率： 3048Hz
实际pwm占空比： 50.000000%
实际pwm占空比步幅： 0.003048%
实际pwm频率： 3048.037109Hz

TIM3:
期望pwm占空比： 50.000000%
期望pwm频率： 3049Hz
实际pwm占空比： 50.000000%
实际pwm占空比步幅： 0.003049%
实际pwm频率： 3048.966309Hz

TIM3:
期望pwm占空比： 50.000000%
期望pwm频率： 3050Hz
实际pwm占空比： 50.000000%
实际pwm占空比步幅： 0.003050%
实际pwm频率： 3049.989258Hz

TIM3:
期望pwm占空比： 50.000000%
期望pwm频率： 3051Hz
实际pwm占空比： 50.000000%
实际pwm占空比步幅： 0.003051%
实际pwm频率： 3051.012939Hz

TIM3:
期望pwm占空比： 50.000000%
期望pwm频率： 3052Hz
实际pwm占空比： 50.000000%
实际pwm占空比步幅： 0.001526%
实际pwm频率： 3051.990723Hz

TIM3:
期望pwm占空比： 50.000000%
期望pwm频率： 3053Hz
实际pwm占空比： 50.000000%
实际pwm占空比步幅： 0.001527%
实际pwm频率： 3053.015625Hz

TIM3:
期望pwm占空比： 50.000000%
期望pwm频率： 3054Hz
实际pwm占空比： 50.000000%
实际pwm占空比步幅： 0.001527%
实际pwm频率： 3053.994629Hz

TIM3:
期望pwm占空比： 50.000000%
期望pwm频率： 3055Hz
实际pwm占空比： 50.000000%
实际pwm占空比步幅： 0.001528%
实际pwm频率： 3055.020996Hz

TIM3:
期望pwm占空比： 50.000000%
期望pwm频率： 3056Hz
实际pwm占空比： 50.000000%
实际pwm占空比步幅： 0.001528%
实际pwm频率： 3056.001221Hz
```

